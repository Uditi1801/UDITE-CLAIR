{% extends "read.html" %}
{% block title %}Loops | Udiva{% endblock %}
{% block content %}

<style>
body,.site-shell{background:#f6f6f7!important}

/* ===== CONTAINER ===== */
.read-container{
  max-width:880px;
  margin:4.5rem auto 6rem;
  padding:4rem 3.2rem 4.8rem;
  background:#ffffff;
  border-radius:28px;
  box-shadow:0 50px 100px rgba(0,0,0,0.08);
}

/* ===== TOOLBAR ===== */
.read-toolbar{
  display:flex;
  gap:.7rem;
  flex-wrap:wrap;
  margin-bottom:2.4rem;
}
.read-toolbar button{
  padding:.65rem 1.45rem;
  border-radius:999px;
  border:1px solid #6fa98f;
  background:#fff;
  font-size:.82rem;
  cursor:pointer;
  white-space:nowrap;
}

/* ===== NOTES + CANVAS ===== */
.notes-wrapper{position:relative}
#notesContent{color:#1e1e1e}
#drawCanvas{
  position:absolute;
  inset:0;
  z-index:4;
  pointer-events:none;
}

/* ===== CURSORS ===== */
#drawCanvas.pen{
  cursor:url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24'>\
  <text y='20' font-size='20'>‚úèÔ∏è</text>\
  </svg>") 0 24, crosshair;
}
#drawCanvas.eraser{cursor:cell}

/* ===== TYPOGRAPHY ===== */
.read-title{
  font-family:'Playfair Display',serif;
  font-size:3.1rem;
  margin-bottom:.4rem;
}
.read-subtitle{
  font-size:.85rem;
  letter-spacing:.22em;
  color:#9a9a9a;
  margin-bottom:3.6rem;
}

/* ===== SECTIONS ===== */
.read-section{margin-bottom:4rem}
.read-section h2{
  font-size:1.55rem;
  margin-bottom:1rem;
}
.read-section p{
  font-size:1.05rem;
  line-height:1.95;
}

/* ===== BOXES ===== */
.story-box{
  background:linear-gradient(135deg,#f4fbf7,#ffffff);
  border-left:4px solid #6fa98f;
  padding:1.6rem 1.8rem;
  border-radius:18px;
  margin-top:1.8rem;
}
.note-box{
  background:#eef7f2;
  padding:1.3rem 1.6rem;
  border-radius:16px;
  margin-top:1.6rem;
  font-size:.95rem;
}
.code-block{
  background:#f1f1f3;
  padding:1.3rem 1.6rem;
  border-radius:16px;
  margin-top:1.3rem;
  font-family:monospace;
  font-size:.95rem;
}

/* ===== REVEAL ===== */
.reveal-btn{
  margin-top:1.4rem;
  padding:.7rem 1.6rem;
  border-radius:999px;
  border:1px solid #6fa98f;
  background:transparent;
  font-size:.9rem;
  cursor:pointer;
}
.answer-box{
  margin-top:1.6rem;
  padding:1.4rem 1.6rem;
  background:#f4fbf7;
  border-radius:16px;
  display:none;
}

/* ===== RECAP ===== */
.recap-card{
  background:rgba(111,169,143,.15);
  padding:1.3rem 1.6rem;
  border-radius:18px;
}

/* ===== CTA ===== */
.cta{
  display:flex;
  justify-content:space-between;
  margin-top:5rem;
}
.cta a{
  padding:.95rem 2.5rem;
  border-radius:999px;
  text-decoration:none;
}
.cta .back{
  border:1px solid #d2d2d2;
  color:#000;
}
.cta .practice{
  background:#6fa98f;
  color:#000;
}
</style>

<div class="read-container">

<!-- TOOLBAR -->
<div class="read-toolbar">
  <button onclick="startReading()">üîä Read</button>
  <button onclick="pauseReading()">‚è∏ Pause</button>
  <button onclick="resumeReading()">‚ñ∂ Resume</button>
  <button onclick="stopReading()">‚èπ Stop</button>
  <button onclick="enableEdit()">‚úç Edit</button>
  <button onclick="underline()">U Underline</button>
  <button onclick="highlight()">üñç Highlight</button>
  <button onclick="togglePen()">‚úè Draw</button>
  <button onclick="toggleEraser()">üßΩ Erase</button>
  <button onclick="clearCanvas()">üßπ Clear</button>
  <button onclick="saveNotes()">üíæ Save</button>
  <button onclick="window.print()">üìÑ Download PDF</button>


</div>

<div class="notes-wrapper">
<canvas id="drawCanvas"></canvas>

<div id="notesContent" contenteditable="false">

<h1 class="read-title">Loops</h1>
<div class="read-subtitle">REPEATING WITH PURPOSE</div>

<div class="read-section">
<h2>What is a Loop?</h2>
<p>
A loop allows a program to <strong>repeat a set of instructions</strong>
until a certain condition is met.
</p>
<p>
Instead of writing the same code again and again,
loops help programs work efficiently and cleanly.
</p>
</div>

<div class="read-section">
<h2>Think of it like this</h2>
<div class="story-box">
Imagine walking up a staircase.<br><br>
You take one step.<br>
You check if you‚Äôve reached the top.<br>
If not, you take another step.<br><br>
This repeating action is exactly how loops work.
</div>
</div>

<div class="read-section">
<h2>How a Loop Works</h2>

<svg width="100%" viewBox="0 0 600 480"
     style="max-width:680px;margin:2.8rem auto;display:block;">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7"
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6fa98f"/>
    </marker>
  </defs>

  <rect x="200" y="20" width="200" height="60" rx="18"
        fill="#f4fbf7" stroke="#6fa98f" stroke-width="2"/>
  <text x="300" y="55" text-anchor="middle">Start</text>

  <polygon points="300,120 420,190 300,260 180,190"
           fill="#f4fbf7" stroke="#6fa98f" stroke-width="2"/>
  <text x="300" y="195" text-anchor="middle">Condition?</text>

  <rect x="200" y="300" width="200" height="60" rx="18"
        fill="#f4fbf7" stroke="#6fa98f" stroke-width="2"/>
  <text x="300" y="335" text-anchor="middle">Loop body</text>

  <line x1="300" y1="80" x2="300" y2="120"
        stroke="#6fa98f" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="300" y1="260" x2="300" y2="300"
        stroke="#6fa98f" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="420" y1="190" x2="420" y2="55"
        stroke="#6fa98f" stroke-width="2"/>
  <line x1="420" y1="55" x2="300" y2="55"
        stroke="#6fa98f" stroke-width="2" marker-end="url(#arrow)"/>
</svg>
</div>

<div class="read-section">
<h2>Basic Loop Example</h2>
<div class="code-block">
for (int i = 1; i &lt;= 3; i++) {<br>
&nbsp;&nbsp;cout &lt;&lt; i;<br>
}
</div>
<div class="note-box">
This loop prints numbers from 1 to 3 by repeating the same block of code.
</div>
</div>

<div class="read-section">
<h2>A tiny moment to think</h2>
<p>
If a loop runs from <code>i = 0</code> to <code>i &lt; 5</code>,
how many times will the loop body execute?
</p>

<button class="reveal-btn" onclick="revealAnswer()">Reveal answer</button>

<div class="answer-box" id="answerBox">
<strong>Answer:</strong> The loop runs <strong>5 times</strong>.<br><br>
The values of <code>i</code> will be 0, 1, 2, 3, and 4.
</div>
</div>

<div class="read-section">
<h2>Quick recap</h2>
<div class="recap-card">
‚úî Loops repeat code automatically<br>
‚úî Conditions control repetition<br>
‚úî They reduce duplication and errors
</div>
</div>

</div>
</div>

<div class="cta">
<a class="back" href="/topics">‚Üê Back</a>
<a class="practice" href="/quiz/loops/easy">Practice with quiz</a>
</div>

</div>

<script>
const notes=document.getElementById("notesContent");
const canvas=document.getElementById("drawCanvas");
const ctx=canvas.getContext("2d");

/* Canvas */
function resizeCanvas(){
  canvas.width=notes.scrollWidth;
  canvas.height=notes.scrollHeight;
}
window.addEventListener("load",resizeCanvas);
window.addEventListener("resize",resizeCanvas);

/* Draw / Erase */
let mode="off", dragging=false;

function togglePen(){
  mode = mode==="draw" ? "off" : "draw";
  canvas.className = mode==="draw" ? "pen" : "";
  canvas.style.pointerEvents = mode==="draw" ? "auto" : "none";
}
function toggleEraser(){
  mode = mode==="erase" ? "off" : "erase";
  canvas.className = mode==="erase" ? "eraser" : "";
  canvas.style.pointerEvents = mode==="erase" ? "auto" : "none";
}

canvas.onmousedown=e=>{
  if(mode==="off") return;
  dragging=true;
  ctx.beginPath();
  ctx.moveTo(e.offsetX,e.offsetY);
};
canvas.onmousemove=e=>{
  if(!dragging) return;
  ctx.lineWidth = mode==="erase" ? 16 : 2;
  ctx.strokeStyle = mode==="erase" ? "#ffffff" : "#6fa98f";
  ctx.lineTo(e.offsetX,e.offsetY);
  ctx.stroke();
};
canvas.onmouseup=()=>dragging=false;

function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}

/* Edit */
function enableEdit(){notes.contentEditable=true;notes.focus()}
function saveNotes(){notes.contentEditable=false}

/* Underline & Highlight */
function wrapSelection(style){
  const sel=window.getSelection();
  if(!sel.rangeCount) return;
  const range=sel.getRangeAt(0);
  if(!notes.contains(range.commonAncestorContainer)) return;
  const span=document.createElement("span");
  Object.assign(span.style,style);
  range.surroundContents(span);
  sel.removeAllRanges();
}
function underline(){wrapSelection({textDecoration:"underline"})}
function highlight(){wrapSelection({backgroundColor:"#fff3b0"})}

/* Read ‚Äì female voice, safe */
let femaleVoice=null;
function loadVoices(){
  const v=speechSynthesis.getVoices();
  femaleVoice =
    v.find(x=>x.name==="Samantha") ||
    v.find(x=>x.lang.startsWith("en"));
}
speechSynthesis.onvoiceschanged=loadVoices;
loadVoices();

function startReading(){
  speechSynthesis.cancel();
  if(!femaleVoice){
    setTimeout(startReading,150);
    return;
  }
  const u=new SpeechSynthesisUtterance(notes.innerText);
  u.voice=femaleVoice;
  u.rate=0.95;
  u.pitch=1.3;
  speechSynthesis.speak(u);
}
function pauseReading(){speechSynthesis.pause()}
function resumeReading(){speechSynthesis.resume()}
function stopReading(){speechSynthesis.cancel()}

/* Reveal */
function revealAnswer(){
  document.getElementById("answerBox").style.display="block";
}
</script>

{% endblock %}
