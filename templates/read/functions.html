{% extends "read.html" %}
{% block title %}Functions | Udiva{% endblock %}
{% block content %}

<style>
body,.site-shell{background:#f6f6f7!important}

/* ===== CONTAINER ===== */
.read-container{
  max-width:880px;
  margin:4.5rem auto 6rem;
  padding:4rem 3.2rem 4.8rem;
  background:#ffffff;
  border-radius:28px;
  box-shadow:0 50px 100px rgba(0,0,0,0.08);
}

/* ===== TOOLBAR ===== */
.read-toolbar{
  display:flex;
  gap:.7rem;
  flex-wrap:wrap;
  margin-bottom:2.4rem;
}
.read-toolbar button{
  padding:.65rem 1.45rem;
  border-radius:999px;
  border:1px solid #8b8fe8;
  background:#fff;
  font-size:.82rem;
  cursor:pointer;
  white-space:nowrap;
}

/* ===== NOTES + CANVAS ===== */
.notes-wrapper{position:relative}
#notesContent{color:#1e1e1e}
#drawCanvas{
  position:absolute;
  inset:0;
  z-index:4;
  pointer-events:none;
}

/* ===== CURSORS ===== */
#drawCanvas.pen{
  cursor:url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' width='24' height='24'>\
  <text y='20' font-size='20'>‚úèÔ∏è</text>\
  </svg>") 0 24, crosshair;
}
#drawCanvas.eraser{cursor:cell}

/* ===== TYPOGRAPHY ===== */
.read-title{
  font-family:'Playfair Display',serif;
  font-size:3.1rem;
  margin-bottom:.4rem;
}
.read-subtitle{
  font-size:.85rem;
  letter-spacing:.22em;
  color:#9a9a9a;
  margin-bottom:3.6rem;
}

/* ===== SECTIONS ===== */
.read-section{margin-bottom:4rem}
.read-section h2{
  font-size:1.55rem;
  margin-bottom:1rem;
}
.read-section p{
  font-size:1.05rem;
  line-height:1.95;
}

/* ===== BOXES ===== */
.story-box{
  background:linear-gradient(135deg,#f2f4ff,#ffffff);
  border-left:4px solid #8b8fe8;
  padding:1.6rem 1.8rem;
  border-radius:18px;
  margin-top:1.8rem;
}
.note-box{
  background:#eef0ff;
  padding:1.3rem 1.6rem;
  border-radius:16px;
  margin-top:1.6rem;
  font-size:.95rem;
}
.code-block{
  background:#f1f1f3;
  padding:1.3rem 1.6rem;
  border-radius:16px;
  margin-top:1.3rem;
  font-family:monospace;
  font-size:.95rem;
}

/* ===== FLOW ===== */
.func-box{
  fill:#f2f4ff;
  stroke:#8b8fe8;
  stroke-width:2;
  rx:16;
}

/* ===== REVEAL ===== */
.reveal-btn{
  margin-top:1.4rem;
  padding:.7rem 1.6rem;
  border-radius:999px;
  border:1px solid #8b8fe8;
  background:transparent;
  font-size:.9rem;
  cursor:pointer;
}
.answer-box{
  margin-top:1.6rem;
  padding:1.4rem 1.6rem;
  background:#f2f4ff;
  border-radius:16px;
  display:none;
}

/* ===== RECAP ===== */
.recap-card{
  background:rgba(139,143,232,.18);
  padding:1.3rem 1.6rem;
  border-radius:18px;
}

/* ===== CTA ===== */
.cta{
  display:flex;
  justify-content:space-between;
  margin-top:5rem;
}
.cta a{
  padding:.95rem 2.5rem;
  border-radius:999px;
  text-decoration:none;
}
.cta .back{
  border:1px solid #d2d2d2;
  color:#000;
}
.cta .practice{
  background:#8b8fe8;
  color:#000;
}
</style>

<div class="read-container">

<!-- TOOLBAR -->
<div class="read-toolbar">
  <button onclick="startReading()">üîä Read</button>
  <button onclick="pauseReading()">‚è∏ Pause</button>
  <button onclick="resumeReading()">‚ñ∂ Resume</button>
  <button onclick="stopReading()">‚èπ Stop</button>
  <button onclick="enableEdit()">‚úç Edit</button>
  <button onclick="underline()">U Underline</button>
  <button onclick="highlight()">üñç Highlight</button>
  <button onclick="togglePen()">‚úè Draw</button>
  <button onclick="toggleEraser()">üßΩ Erase</button>
  <button onclick="clearCanvas()">üßπ Clear</button>
  <button onclick="saveNotes()">üíæ Save</button>
  <button onclick="window.print()">üìÑ Download PDF</button>


</div>

<div class="notes-wrapper">
<canvas id="drawCanvas"></canvas>

<div id="notesContent" contenteditable="false">

<h1 class="read-title">Functions</h1>
<div class="read-subtitle">ORGANISING CODE WITH INTENTION</div>

<div class="read-section">
<h2>What is a Function?</h2>
<p>
A function is a <strong>block of code</strong> that performs a specific task.
</p>
<p>
Instead of writing the same logic repeatedly,
we define it once and reuse it whenever needed.
</p>
</div>

<div class="read-section">
<h2>Think of it like this</h2>
<div class="story-box">
Imagine a coffee machine.<br><br>
You give it ingredients.<br>
It follows fixed steps.<br>
It gives you coffee.<br><br>
A function works the same way.
</div>
</div>

<div class="read-section">
<h2>How a Function Works</h2>

<svg width="100%" viewBox="0 0 600 300"
     style="max-width:680px;margin:2.8rem auto;display:block;">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7"
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b8fe8"/>
    </marker>
  </defs>

  <rect x="40" y="120" width="160" height="60" class="func-box"/>
  <text x="120" y="155" text-anchor="middle">Input</text>

  <rect x="220" y="80" width="200" height="140" class="func-box"/>
  <text x="320" y="135" text-anchor="middle">Function</text>
  <text x="320" y="165" text-anchor="middle">Logic</text>

  <rect x="440" y="120" width="160" height="60" class="func-box"/>
  <text x="520" y="155" text-anchor="middle">Output</text>

  <line x1="200" y1="150" x2="220" y2="150"
        stroke="#8b8fe8" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="420" y1="150" x2="440" y2="150"
        stroke="#8b8fe8" stroke-width="2" marker-end="url(#arrow)"/>
</svg>
</div>

<div class="read-section">
<h2>Basic Function Example</h2>
<div class="code-block">
int add(int a, int b) {<br>
&nbsp;&nbsp;return a + b;<br>
}
</div>
<div class="note-box">
This function takes two values, processes them,
and returns the result.
</div>
</div>

<div class="read-section">
<h2>A tiny moment to think</h2>
<p>
If a function returns <code>a + b</code>,
what will be the result when <code>a = 3</code>
and <code>b = 4</code>?
</p>

<button class="reveal-btn" onclick="revealAnswer()">Reveal answer</button>

<div class="answer-box" id="answerBox">
<strong>Answer:</strong> The function returns <strong>7</strong>.<br><br>
The values are passed as input, processed,
and the result is returned.
</div>
</div>

<div class="read-section">
<h2>Quick recap</h2>
<div class="recap-card">
‚úî Functions group reusable code<br>
‚úî They accept input and produce output<br>
‚úî They make programs organised and maintainable
</div>
</div>

</div>
</div>

<div class="cta">
<a class="back" href="/topics">‚Üê Back</a>
<a class="practice" href="/quiz/functions/easy">Practice with quiz</a>
</div>

</div>

<script>
const notes=document.getElementById("notesContent");
const canvas=document.getElementById("drawCanvas");
const ctx=canvas.getContext("2d");

/* Canvas */
function resizeCanvas(){
  canvas.width=notes.scrollWidth;
  canvas.height=notes.scrollHeight;
}
window.addEventListener("load",resizeCanvas);
window.addEventListener("resize",resizeCanvas);

/* Draw / Erase */
let mode="off", dragging=false;

function togglePen(){
  mode = mode==="draw" ? "off" : "draw";
  canvas.className = mode==="draw" ? "pen" : "";
  canvas.style.pointerEvents = mode==="draw" ? "auto" : "none";
}
function toggleEraser(){
  mode = mode==="erase" ? "off" : "erase";
  canvas.className = mode==="erase" ? "eraser" : "";
  canvas.style.pointerEvents = mode==="erase" ? "auto" : "none";
}

canvas.onmousedown=e=>{
  if(mode==="off") return;
  dragging=true;
  ctx.beginPath();
  ctx.moveTo(e.offsetX,e.offsetY);
};
canvas.onmousemove=e=>{
  if(!dragging) return;
  ctx.lineWidth = mode==="erase" ? 16 : 2;
  ctx.strokeStyle = mode==="erase" ? "#ffffff" : "#8b8fe8";
  ctx.lineTo(e.offsetX,e.offsetY);
  ctx.stroke();
};
canvas.onmouseup=()=>dragging=false;

function clearCanvas(){ctx.clearRect(0,0,canvas.width,canvas.height)}

/* Edit */
function enableEdit(){notes.contentEditable=true;notes.focus()}
function saveNotes(){notes.contentEditable=false}

/* Underline & Highlight */
function wrapSelection(style){
  const sel=window.getSelection();
  if(!sel.rangeCount) return;
  const range=sel.getRangeAt(0);
  if(!notes.contains(range.commonAncestorContainer)) return;
  const span=document.createElement("span");
  Object.assign(span.style,style);
  range.surroundContents(span);
  sel.removeAllRanges();
}
function underline(){wrapSelection({textDecoration:"underline"})}
function highlight(){wrapSelection({backgroundColor:"#fff3b0"})}

/* Read ‚Äì female voice, safe */
let femaleVoice=null;
function loadVoices(){
  const v=speechSynthesis.getVoices();
  femaleVoice =
    v.find(x=>x.name==="Samantha") ||
    v.find(x=>x.lang.startsWith("en"));
}
speechSynthesis.onvoiceschanged=loadVoices;
loadVoices();

function startReading(){
  speechSynthesis.cancel();
  if(!femaleVoice){
    setTimeout(startReading,150);
    return;
  }
  const u=new SpeechSynthesisUtterance(notes.innerText);
  u.voice=femaleVoice;
  u.rate=0.95;
  u.pitch=1.3;
  speechSynthesis.speak(u);
}
function pauseReading(){speechSynthesis.pause()}
function resumeReading(){speechSynthesis.resume()}
function stopReading(){speechSynthesis.cancel()}

/* Reveal */
function revealAnswer(){
  document.getElementById("answerBox").style.display="block";
}
</script>

{% endblock %}
